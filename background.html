<script>
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if (request.type == "config"){
      conf = {};
      var i;
      var keys = request.keys.split(",");
      for (i in keys){
        var key = keys[i]
        conf[key] = localStorage[key];
      }
      sendResponse(conf);
    }else{
      sendResponse({});
    }
  });
</script>
